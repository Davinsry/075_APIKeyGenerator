<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galactic API | Live Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL RESET & STYLE --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            overflow: hidden;
            background-color: #000;
            font-family: 'Poppins', sans-serif;
            height: 100vh;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Canvas Three.js di belakang */
        canvas { display: block; position: fixed; top: 0; left: 0; z-index: -1; }

        /* Utility Class untuk Navigasi */
        .page-section { display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; pointer-events: none; }
        .page-section.active { display: flex; justify-content: center; align-items: center; pointer-events: all; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- CARD STYLE (GLASSMORPHISM) --- */
        .card {
            background: rgba(0, 0, 0, 0.6); 
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            width: 90%; max-width: 480px; padding: 40px;
            border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 50px rgba(255, 100, 50, 0.1);
            position: relative; z-index: 10; pointer-events: auto;
        }

        /* Typography */
        h2 { font-family: 'Orbitron', sans-serif; text-align: center; margin-bottom: 10px; letter-spacing: 3px; color: #ffaa55; text-shadow: 0 0 15px rgba(255, 100, 0, 0.6); }
        .admin-theme h2 { color: #00d2ff; text-shadow: 0 0 15px rgba(0, 210, 255, 0.6); }
        .dashboard-theme h1 { color: #00ff66; text-shadow: 0 0 15px rgba(0, 255, 100, 0.6); font-family: 'Orbitron', sans-serif; font-size: 24px;}

        p.subtitle { text-align: center; color: #ccc; font-size: 12px; margin-bottom: 30px; letter-spacing: 1px; }

        /* Inputs & Buttons */
        .form-group { margin-bottom: 20px; width: 100%; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 11px; color: #ffaa55; letter-spacing: 1px; text-transform: uppercase; }
        .admin-theme label { color: #00d2ff; }
        
        input {
            width: 100%; padding: 12px 15px; background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 100, 50, 0.3); color: white; border-radius: 6px; outline: none; transition: 0.3s;
        }
        .admin-theme input { border-color: rgba(0, 210, 255, 0.3); }
        
        input:focus { background: rgba(255, 255, 255, 0.1); }
        .admin-theme input:focus { border-color: #00d2ff; box-shadow: 0 0 15px rgba(0, 210, 255, 0.3); }

        .btn-group { display: flex; gap: 15px; width: 100%; }
        button {
            flex: 1; padding: 14px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;
            font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; transition: 0.3s;
        }

        #generateBtn { background: transparent; border: 1px solid #ffaa55; color: #ffaa55; }
        #generateBtn:hover { background: rgba(255, 170, 85, 0.1); }
        #saveBtn { background: linear-gradient(45deg, #ffaa55, #d65d0e); color: white; }
        #saveBtn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(214, 93, 14, 0.6); }

        .admin-btn-login { width: 100%; background: linear-gradient(45deg, #00d2ff, #007bff); color: white; }
        .admin-btn-login:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(0, 123, 255, 0.6); }

        /* Links */
        .nav-link {
            position: absolute; top: 20px; right: 20px; padding: 8px 16px;
            background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2);
            color: #aaa; text-decoration: none; border-radius: 30px; font-size: 11px;
            font-family: 'Orbitron', sans-serif; transition: 0.3s; pointer-events: auto; z-index: 100;
        }
        .nav-link:hover { border-color: #ffaa55; color: #ffaa55; }
        .nav-link.back { left: 20px; right: auto; }

        /* --- DASHBOARD SPECIFIC --- */
        .dashboard-container {
            width: 95%; max-width: 1200px; margin: auto;
            background: rgba(0, 20, 0, 0.6); backdrop-filter: blur(12px);
            border-radius: 15px; border: 1px solid rgba(0, 255, 100, 0.2);
            padding: 30px; box-shadow: 0 0 60px rgba(0, 255, 100, 0.1);
            pointer-events: auto;
        }
        
        .dash-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(0,255,100,0.3); padding-bottom: 15px; }
        
        table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }
        th { text-align: left; color: #00ff66; font-family: 'Orbitron', sans-serif; font-size: 11px; padding: 10px; border-bottom: 1px solid rgba(0,255,100,0.2); }
        td { padding: 15px; font-size: 13px; color: #ddd; background: rgba(255,255,255,0.03); border-top: 1px solid rgba(255,255,255,0.05); border-bottom: 1px solid rgba(255,255,255,0.05); }
        td:first-child { border-top-left-radius: 8px; border-bottom-left-radius: 8px; }
        td:last-child { border-top-right-radius: 8px; border-bottom-right-radius: 8px; }
        .valid { color: #00ff66; font-weight: bold; }
        
        #logoutBtn { background: transparent; border: 1px solid #ff4444; color: #ff4444; width: auto; padding: 8px 20px; }
        #logoutBtn:hover { background: #ff4444; color: white; }

        /* API Box */
        .api-box input { text-align: center; border: 1px dashed #ffaa55; background: rgba(0,0,0,0.3); font-family: 'Orbitron', monospace; letter-spacing: 2px; }

        /* Notification */
        #notification {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(0, 255, 100, 0.8); color: black; padding: 10px 20px;
            border-radius: 30px; font-weight: bold; opacity: 0; transition: 0.5s; pointer-events: none; z-index: 200;
        }
    </style>
</head>
<body>

    <div id="notification">Action Successful</div>

    <section id="page-landing" class="page-section active fade-in">
        <a href="#" onclick="switchPage('login')" class="nav-link">ADMIN ACCESS üõ∏</a>
        
        <div class="card">
            <h2>EVENT HORIZON</h2>
            <p class="subtitle">Secure Data Transmission Point (Demo)</p>
            
            <form id="userForm">
                <div class="form-group">
                    <label>First Name</label>
                    <input type="text" id="firstName" placeholder="Ex: Cooper" required>
                </div>
                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" id="lastName" placeholder="Ex: Murph" required>
                </div>
                <div class="form-group">
                    <label>Comm Frequency (Email)</label>
                    <input type="email" id="email" placeholder="cooper@nasa.gov" required>
                </div>
                <div class="form-group api-box">
                    <label>Quantum Key</label>
                    <input type="text" id="apiKey" readonly placeholder="WAITING..." required>
                </div>
                <div class="btn-group">
                    <button type="button" id="btnGen">Generate</button>
                    <button type="submit" id="btnSave">Transmit</button>
                </div>
            </form>
        </div>
    </section>

    <section id="page-login" class="page-section">
        <a href="#" onclick="switchPage('landing')" class="nav-link back">‚Üê ABORT MISSION</a>
        
        <div class="card admin-theme">
            <h2>COMMAND ACCESS</h2>
            <p class="subtitle">Restricted Area (Demo Login: Any)</p>
            <form id="loginForm">
                <div class="form-group">
                    <label>Commander ID</label>
                    <input type="email" value="admin@system.net">
                </div>
                <div class="form-group">
                    <label>Security Code</label>
                    <input type="password" value="admin123">
                </div>
                <button type="submit" class="admin-btn-login">INITIALIZE SESSION</button>
            </form>
        </div>
    </section>

    <section id="page-dashboard" class="page-section">
        <div class="dashboard-container dashboard-theme">
            <div class="dash-header">
                <h1>SYSTEM CORE // DATA LOGS</h1>
                <button id="logoutBtn" onclick="switchPage('landing')">TERMINATE</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Operative Name</th>
                        <th>Email</th>
                        <th>Quantum Key</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    </tbody>
            </table>
        </div>
    </section>

    <script type="importmap">{"imports": {"three": "https://unpkg.com/three@0.160.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"}}</script>
    
    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- GLOBAL VARIABLES ---
        let scene, camera, renderer, composer;
        let blackHoleGroup, marsGroup;
        let currentVisual = 'blackhole'; // 'blackhole' or 'mars'

        // --- INIT THREE.JS ---
        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 5000);
            camera.position.set(0, 20, 140);
            
            renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.toneMapping = THREE.ReinhardToneMapping;
            document.body.appendChild(renderer.domElement);

            // POST PROCESSING
            const renderScene = new RenderPass(scene, camera);
            const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
            composer = new EffectComposer(renderer);
            composer.addPass(renderScene);
            composer.addPass(bloomPass);

            createBlackHole();
            createMars();
            
            // Start with Black Hole visible
            marsGroup.visible = false;

            animate();
        }

        // --- VISUAL 1: BLACK HOLE ---
        function createBlackHole() {
            blackHoleGroup = new THREE.Group();
            
            // Sphere
            const bhGeo = new THREE.SphereGeometry(18, 64, 64);
            const bhMat = new THREE.MeshBasicMaterial({color: 0x000000});
            blackHoleGroup.add(new THREE.Mesh(bhGeo, bhMat));

            // Accretion Disk (Particles)
            const pCount = 80000;
            const pGeo = new THREE.BufferGeometry();
            const pos = [], col = [], size = [];
            const cIn = new THREE.Color(0xffaa55), cOut = new THREE.Color(0xff4400);

            for(let i=0; i<pCount; i++){
                const r = 22 + Math.random() * 60;
                const a = Math.random() * Math.PI * 2;
                const x = Math.cos(a) * r;
                const z = Math.sin(a) * r;
                const y = (Math.random() - 0.5) * (r * 0.1);
                
                pos.push(x, y, z);
                
                const mixed = cIn.clone().lerp(cOut, (r-22)/60);
                col.push(mixed.r, mixed.g, mixed.b);
                size.push(Math.random());
            }

            pGeo.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
            pGeo.setAttribute('color', new THREE.Float32BufferAttribute(col, 3));
            pGeo.setAttribute('size', new THREE.Float32BufferAttribute(size, 1));

            const pMat = new THREE.ShaderMaterial({
                uniforms: { uTime: {value: 0} },
                vertexShader: `
                    uniform float uTime; attribute float size; varying vec3 vC;
                    void main(){
                        vC = color;
                        vec4 mP = modelMatrix * vec4(position, 1.0);
                        float r = length(mP.xz);
                        float a = (100.0/r) * uTime * 0.1;
                        float x = mP.x*cos(a) - mP.z*sin(a);
                        float z = mP.x*sin(a) + mP.z*cos(a);
                        mP.x = x; mP.z = z;
                        vec4 vP = viewMatrix * mP;
                        gl_Position = projectionMatrix * vP;
                        gl_PointSize = size * (300.0 / -vP.z);
                    }
                `,
                fragmentShader: `varying vec3 vC; void main(){ if(length(gl_PointCoord-vec2(0.5))>0.5) discard; gl_FragColor=vec4(vC, 1.0); }`,
                transparent: true, blending: THREE.AdditiveBlending, depthWrite: false
            });

            const disk = new THREE.Points(pGeo, pMat);
            disk.rotation.x = 0.2;
            disk.userData = { isDisk: true, material: pMat }; // Tag for animation
            blackHoleGroup.add(disk);

            scene.add(blackHoleGroup);
        }

        // --- VISUAL 2: MARS ---
        function createMars() {
            marsGroup = new THREE.Group();

            // Light
            const sunLight = new THREE.DirectionalLight(0xffffff, 3);
            sunLight.position.set(50, 50, 50);
            marsGroup.add(sunLight);
            marsGroup.add(new THREE.AmbientLight(0x442222, 0.5));

            // Planet
            const texLoader = new THREE.TextureLoader();
            const marsGeo = new THREE.SphereGeometry(60, 64, 64);
            const marsMat = new THREE.MeshStandardMaterial({
                map: texLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/mars_1k.jpg'),
                color: 0xaa4422, roughness: 0.8
            });
            const mars = new THREE.Mesh(marsGeo, marsMat);
            mars.position.set(-50, -40, -20);
            mars.userData = { isMars: true };
            marsGroup.add(mars);

            // Green Matrix Particles
            const pCount = 30000;
            const pGeo = new THREE.BufferGeometry();
            const pos = [], col = [];
            const cIn = new THREE.Color(0xccffcc), cOut = new THREE.Color(0x004422);

            for(let i=0; i<pCount; i++){
                const x = (Math.random()-0.5) * 300;
                const y = (Math.random()-0.5) * 200;
                const z = (Math.random()-0.5) * 200;
                pos.push(x, y, z);
                const mixed = cIn.clone().lerp(cOut, Math.random());
                col.push(mixed.r, mixed.g, mixed.b);
            }
            pGeo.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
            pGeo.setAttribute('color', new THREE.Float32BufferAttribute(col, 3));

            const pMat = new THREE.PointsMaterial({ size: 0.5, vertexColors: true, transparent: true, opacity: 0.6 });
            const particles = new THREE.Points(pGeo, pMat);
            particles.userData = { isParticles: true };
            marsGroup.add(particles);

            scene.add(marsGroup);
        }

        // --- ANIMATION LOOP ---
        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const t = clock.getElapsedTime();

            // Animate Black Hole
            if (blackHoleGroup.visible) {
                blackHoleGroup.children.forEach(child => {
                    if (child.userData.isDisk) child.userData.material.uniforms.uTime.value = t;
                });
            }

            // Animate Mars
            if (marsGroup.visible) {
                marsGroup.children.forEach(child => {
                    if (child.userData.isMars) child.rotation.y += 0.002;
                    if (child.userData.isParticles) child.rotation.y = t * 0.05;
                });
            }

            composer.render();
        }

        // --- HANDLE RESIZE ---
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

        init();

        // --- EXPORT FUNCTION TO WINDOW (FOR HTML BUTTONS) ---
        window.changeVisual = function(type) {
            if(type === 'blackhole') {
                blackHoleGroup.visible = true;
                marsGroup.visible = false;
                camera.position.set(0, 20, 140);
            } else {
                blackHoleGroup.visible = false;
                marsGroup.visible = true;
                camera.position.set(0, 20, 160);
            }
        }
    </script>

    <script>
        // --- 1. MOCK DATABASE ---
        let dbUsers = [
            { id: 1, first: "Davin", last: "Surya", email: "davin@demo.com", key: "demo-key-8821", status: "Valid" },
            { id: 2, first: "Elon", last: "Musk", email: "elon@spacex.com", key: "mars-mission-x", status: "Valid" },
            { id: 3, first: "Inter", last: "Stellar", email: "cooper@nasa.gov", key: "gargantua-001", status: "Invalid" }
        ];

        // --- 2. NAVIGATION LOGIC ---
        function switchPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(el => {
                el.classList.remove('active');
                el.classList.remove('fade-in');
            });

            // Show target page
            const target = document.getElementById('page-' + pageId);
            target.classList.add('active');
            target.classList.add('fade-in');

            // Switch 3D Visual
            if (pageId === 'dashboard') {
                window.changeVisual('mars');
                renderTable();
            } else {
                window.changeVisual('blackhole');
            }
        }

        // --- 3. USER FUNCTIONS ---
        document.getElementById('btnGen').addEventListener('click', () => {
            const uuid = 'key-' + Math.random().toString(36).substr(2, 9) + '-' + Date.now().toString().slice(-4);
            document.getElementById('apiKey').value = uuid;
        });

        document.getElementById('userForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const fName = document.getElementById('firstName').value;
            const lName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            const key = document.getElementById('apiKey').value;

            if(!key) { alert("Please Generate Key first!"); return; }

            // Add to Mock DB
            dbUsers.unshift({
                id: dbUsers.length + 1,
                first: fName, last: lName, email: email, key: key, status: "Valid"
            });

            showNotify("Transmission Complete. Data Saved.");
            document.getElementById('userForm').reset();
        });

        // --- 4. ADMIN FUNCTIONS ---
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Mock Login (Accept anything)
            showNotify("Authentication Verified.");
            setTimeout(() => switchPage('dashboard'), 1000);
        });

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            dbUsers.forEach(user => {
                const tr = document.createElement('tr');
                const statusClass = user.status === 'Valid' ? 'valid' : 'invalid';
                const statusColor = user.status === 'Valid' ? '#00ff66' : '#ff4444';
                
                tr.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.first} ${user.last}</td>
                    <td>${user.email}</td>
                    <td style="font-family:monospace; color:#aaa;">${user.key}</td>
                    <td style="color:${statusColor}; font-weight:bold;">${user.status}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function showNotify(msg) {
            const notif = document.getElementById('notification');
            notif.innerText = msg;
            notif.style.opacity = '1';
            notif.style.bottom = '50px';
            setTimeout(() => {
                notif.style.opacity = '0';
                notif.style.bottom = '30px';
            }, 3000);
        }
    </script>
</body>
</html>