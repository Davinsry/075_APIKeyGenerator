<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Core | Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS DASHBOARD (SAMA) --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            overflow-x: hidden;
            background-color: #000;
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            color: white;
        }

        canvas { display: block; position: fixed; top: 0; left: 0; z-index: -1; }

        .container {
            width: 95%;
            max-width: 1200px;
            margin: 50px auto;
            background: rgba(0, 20, 0, 0.6);
            backdrop-filter: blur(12px);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 100, 0.2);
            padding: 30px;
            box-shadow: 0 0 60px rgba(0, 255, 100, 0.1);
            animation: slideUp 1s ease-out;
            position: relative;
            z-index: 10;
        }

        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 30px; border-bottom: 2px solid rgba(0, 255, 100, 0.3);
            padding-bottom: 15px;
        }

        h1 {
            font-family: 'Orbitron', sans-serif; color: #00ff66; letter-spacing: 3px;
            text-shadow: 0 0 15px rgba(0, 255, 100, 0.5); font-size: 24px;
        }

        #logoutBtn {
            background: transparent; border: 1px solid #ff4444; color: #ff4444;
            padding: 8px 20px; border-radius: 30px; cursor: pointer;
            font-family: 'Orbitron', sans-serif; font-size: 12px; transition: 0.3s;
        }
        #logoutBtn:hover { background: #ff4444; color: white; box-shadow: 0 0 15px #ff4444; }

        table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }

        thead th {
            text-align: left; color: #00ff66; font-family: 'Orbitron', sans-serif;
            font-size: 12px; padding: 10px 15px; letter-spacing: 1px;
            text-transform: uppercase; border-bottom: 1px solid rgba(0, 255, 100, 0.2);
        }

        tbody tr { background: rgba(255, 255, 255, 0.03); transition: 0.3s; }
        tbody tr:hover { background: rgba(0, 255, 100, 0.1); transform: scale(1.01); }

        tbody td {
            padding: 15px; font-size: 14px; color: #ddd;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        tbody td:first-child { border-top-left-radius: 8px; border-bottom-left-radius: 8px; border-left: 1px solid rgba(255, 255, 255, 0.05); }
        tbody td:last-child { border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-right: 1px solid rgba(255, 255, 255, 0.05); }

        .status-valid { color: #00ff66; font-weight: bold; text-shadow: 0 0 5px #00ff66; }
        .status-invalid { color: #ff4444; font-weight: bold; text-shadow: 0 0 5px #ff4444; }

        .editBtn {
            background: rgba(255, 200, 0, 0.2); color: #ffcc00; border: 1px solid #ffcc00;
            padding: 5px 15px; border-radius: 4px; cursor: pointer; font-size: 12px; transition: 0.3s;
        }
        .editBtn:hover { background: #ffcc00; color: black; box-shadow: 0 0 10px #ffcc00; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #00ff66; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>SYSTEM CORE // DATA LOGS</h1>
            <button id="logoutBtn">TERMINATE SESSION</button>
        </header>

        <table>
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Operative Name</th>
                    <th>Comm Freq (Email)</th>
                    <th>Quantum Key</th>
                    <th>Init Date</th>
                    <th>Integrity</th>
                    <th>Command</th>
                </tr>
            </thead>
            <tbody id="data-table-body">
                <tr><td colspan="7" style="text-align:center;">CONNECTING TO DATABASE...</td></tr>
            </tbody>
        </table>
    </div>

    <script type="importmap">{"imports": {"three": "https://unpkg.com/three@0.160.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"}}</script>
    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // Setup Scene
        const scene = new THREE.Scene();
        // Hapus Fog (Kabut) agar planet terlihat jelas
        // scene.fog = new THREE.FogExp2(0x000000, 0.002); 

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 5000);
        // Mundurkan kamera sedikit agar area pandang lebih luas
        camera.position.set(0, 20, 160); 
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.3; // Sedikit lebih terang
        document.body.appendChild(renderer.domElement);

        // --- PENCAHAYAAN (PERBAIKAN UTAMA) ---
        // Tambah cahaya ambient agar tidak hitam total
        const ambientLight = new THREE.AmbientLight(0xffaa88, 0.4); 
        scene.add(ambientLight);

        // Cahaya Matahari (Directional) yang lebih kuat dan posisinya pas mengenai planet
        const sunLight = new THREE.DirectionalLight(0xffffff, 4);
        sunLight.position.set(0, 50, 100); // Cahaya dari depan atas
        scene.add(sunLight);

        // --- PLANET MARS ---
        const textureLoader = new THREE.TextureLoader();
        const marsTextureUrl = 'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/mars_1k.jpg';
        
        const marsGeo = new THREE.SphereGeometry(60, 128, 128); 
        
        const marsMat = new THREE.MeshStandardMaterial({
            map: textureLoader.load(marsTextureUrl),
            color: 0xaa4422, // WARNA CADANGAN: Merah Bata (jika tekstur gagal loading)
            roughness: 0.7,
            metalness: 0.2
        });
        
        const mars = new THREE.Mesh(marsGeo, marsMat);
        
        // POSISI DIPERBAIKI:
        // Geser lebih ke kanan (x: -50) dan naik sedikit (y: -40) agar pasti masuk layar
        mars.position.set(-50, -40, -10); 
        
        mars.rotation.z = 0.2; 
        scene.add(mars);

        // --- PARTIKEL HIJAU ---
        const pCount = 40000;
        const pGeo = new THREE.BufferGeometry();
        const pos = new Float32Array(pCount*3), col = new Float32Array(pCount*3), size = new Float32Array(pCount);
        const cIn = new THREE.Color(0xccffcc), cOut = new THREE.Color(0x004422); 

        for(let i=0; i<pCount; i++){
            // Partikel menyebar di sekitar planet
            const i3=i*3, r = 65+Math.random()*100, a = Math.random()*Math.PI*2; 
            pos[i3] = Math.cos(a)*r + mars.position.x; 
            pos[i3+1] = (r*0.2)*(Math.random()-0.5) + mars.position.y; 
            pos[i3+2] = Math.sin(a)*r + mars.position.z;
            const mixed = cIn.clone().lerp(cOut, Math.random());
            col[i3]=mixed.r; col[i3+1]=mixed.g; col[i3+2]=mixed.b;
            size[i] = Math.random() * 1.5;
        }
        pGeo.setAttribute('position', new THREE.BufferAttribute(pos,3));
        pGeo.setAttribute('color', new THREE.BufferAttribute(col,3));
        pGeo.setAttribute('size', new THREE.BufferAttribute(size,1));

        const pMat = new THREE.ShaderMaterial({
            uniforms: { uTime:{value:0}, uP:{value:renderer.getPixelRatio()} },
            vertexShader: `uniform float uTime, uP; attribute float size; varying vec3 vC; void main(){vC=color; vec4 mP=modelMatrix*vec4(position,1.); float r=length(mP.xz); vec4 vP=viewMatrix*mP; gl_Position=projectionMatrix*vP; gl_PointSize=size*uP*(300./-vP.z);}`,
            fragmentShader: `varying vec3 vC; void main(){float d=distance(gl_PointCoord,vec2(.5)); if(d>0.5) discard; gl_FragColor=vec4(vC, 1.0 - d*2.0);}`,
            transparent:true, blending:THREE.AdditiveBlending, depthWrite:false, opacity: 0.6 
        });
        const particles = new THREE.Points(pGeo, pMat);
        scene.add(particles);

        // --- POST PROCESSING ---
        const composer = new EffectComposer(renderer);
        composer.addPass(new RenderPass(scene, camera));
        composer.addPass(new UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight), 0.6, 0.4, 0.1));

        // --- ANIMASI ---
        const clock = new THREE.Clock();
        function animate(){
            const elapsedTime = clock.getElapsedTime();
            
            mars.rotation.y += 0.002; // Putaran sedikit lebih cepat agar terlihat bergerak
            pMat.uniforms.uTime.value = elapsedTime;
            particles.rotation.y = elapsedTime * 0.05;
            
            composer.render();
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', ()=>{
            camera.aspect=window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth,window.innerHeight);
            composer.setSize(window.innerWidth,window.innerHeight);
        });
    </script>

    <script src="dashboard.js"></script>
</body>
</html>